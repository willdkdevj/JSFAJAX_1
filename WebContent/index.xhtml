<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Lista de Produtos</title>

		<style>
			.riscado {
				text-decoration: line-through;
			}
			
			.erro {
				color: red;
			}
			
			table.tabela {
				text-align: center;
				font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
				font-weight: normal;
				font-size: 11px;
				color: #fff;
				width: 450px;
				background-color: #666;
				border: 0px;
				border-collapse: collapse;
				border-spacing: 0px;
			}
	
			table.tabela td {
				background-color: #CCC;
				color: #000;
				padding: 4px;
				text-align: left;
				border: 1px #fff solid;
				width: 150px;
			}
		</style>
</h:head>
<body>

<!-- <h:outputStylesheet library="resources/ccs" name="estilo.css"/> -->

	<h:form id="formProd" acceptcharset="ISO-8859-1" lang="pt">
		<h:panelGrid columns="3">
			Produto:
			<h:inputText id="txtProd" value="#{form.produto.nome}" size="25" maxlength="20" required="true" requiredMessage="Favor informar um nome ao Produto!" pt:placeholder="Informe o Produto" immediate="true">
				<f:ajax event="blur" execute="@this" render="erroTxtProd" />
			</h:inputText>
			<h:message id="erroTxtProd" for="txtProd" styleClass="erro"/>
			
			Quantidade:
			<h:inputText id="txtQtd" value="#{form.produto.quantidade}" size="10" maxlength="4" required="true" requiredMessage="Favor registrar um número válido!" validatorMessage="Informe um número válido!" pt:placeholder="Informe a Número" immediate="true">
				<f:ajax event="blur" execute="@this" render="erroTxtQtd" />
			</h:inputText>
			<h:message id="erroTxtQtd" for="txtQtd" styleClass="erro"/>
			
			<h:commandButton value="Adicionar" actionListener="#{form.Adicionar}">
				<f:ajax event="action" execute="@form" render="tabela @form" />
			</h:commandButton>	
		</h:panelGrid>
		<hr />
		<br />
		
		<h:panelGroup rendered="${form.listaProduto.size() > 0}">
		<table id="tabela" class="tabela" style="table-layout: auto;" bgcolor="#666" border="0" cellspacing="5" align="left" lang="pt">
			<tr>
				<th class="cabecalho" align="center">#</th>
				<th class="cabecalho" align="center">Produto</th>
				<th class="cabecalho" align="center">Qtd.</th>
			</tr>		
			<!--  A parâmetro var é utilizado para acessar os valores dos campos do objeto para a tabela-->
			<ui:repeat var="p" value="#{form.listaProduto}" varStatus="pstatus">
				<tr>
					<td class="marcador">
						<h:selectBooleanCheckbox value="#{p.marcar}" id="chkMarcar" immediate="true">
							<f:ajax event="change" render="@form"/>
						</h:selectBooleanCheckbox>
					</td>
					
					<td class="produto">
						<h:outputText id="txtProd1" value="#{pstatus.index + 1} - #{p.nome}" rendered="#{!p.marcar}"/>
						<h:outputText id="txtProd2" value="#{pstatus.index + 1} - #{p.nome}" styleClass="riscado" rendered="#{p.marcar}" />	
					</td>
						
					<td class="quantidade">
						<h:outputText id="txtQtd1" value="#{p.quantidade}" rendered="#{!p.marcar}"/>
						<h:outputText id="txtQtd2" value="#{p.quantidade}" styleClass="riscado" rendered="#{p.marcar}"/>
					</td>
				</tr>
			</ui:repeat>
		</table>
		</h:panelGroup>
		
		<h:outputText value="Não existe produtos na lista!" rendered="#{form.listaProduto.size() == 0}" style="color: blue;" />
		
	</h:form>

</body>
</html>